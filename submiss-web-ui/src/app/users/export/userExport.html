<!--
  ~  Submiss, eProcurement system for managing tenders
  ~  Copyright (C) 2019 Stadt Bern
  ~  Licensed under the EUPL, Version 1.2 or - as soon as they will be approved by the European Commission - subsequent versions of the EUPL (the "Licence");
  ~  You may not use this work except in compliance with the Licence.
  ~  You may obtain a copy of the Licence at:
  ~  https://joinup.ec.europa.eu/collection/eupl
  ~  Unless required by applicable law or agreed to in writing, software distributed under the Licence is
  ~  distributed on an "AS IS" basis, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  ~  express or implied. See the Licence for the specific language governing permissions and limitations
  ~  under the Licence.
  -->

<div class="row">
  <div class="col-sm-12">
    <h2 class="page-title">Export der Benutzerübersicht</h2>
  </div>
</div>
<div class="row">
  <div id='errorScroll' class="card-box ">
    <form name="userExportCtr.htmlExportForm" data-ng-submit="userExportCtr.exportUsers()">
      <div class="alert alert-danger" ng-if="userExportCtr.areErrorsPresent()" role="alert">
        <ul
          ng-if="userExportCtr.invalidDate || !userExportCtr.htmlExportForm.startDate.$valid || !userExportCtr.htmlExportForm.endDate.$valid">
          <li>
            <field-error translate>invalid_date_error_message</field-error>
          </li>
        </ul>
        <field-error form-element-name="futureDateErrorField" translate></field-error>
        <field-error form-element-name="startDateAfterEndDateErrorField" translate></field-error>
      </div>
      <div class="alert alert-danger" ng-if="userExportCtr.noResultsReturned" role="alert">
        <ul ng-if="userExportCtr.noResultsReturned">
          <li>
            <field-error translate>report_no_results</field-error>
          </li>
        </ul>
      </div>
      <input name="futureDateErrorField" ng-hide="true" data-ng-model="fd"></input>
      <input name="startDateAfterEndDateErrorField" ng-hide="true" data-ng-model="fd"></input>
      <div class="col-sm-12 col-md-6 ">
        <div class="form-group">
          <label>
            <h4>Export der Benutzerübersicht</h4>
          </label>
          <div class="row">
            <div class="col-sm-6"
              ng-class="{'has-error': !userExportCtr.htmlExportForm.startDate.$valid || !userExportCtr.htmlExportForm.startDateAfterEndDateErrorField.$valid}">
              <label class="" for="startDate">Von</label>
              <div class="input-group">
                <input class="form-control datepicker" id="startDate" type="text" uib-datepicker-popup="dd.MM.yyyy"
                  name="startDate" is-open="userExportCtr.openStartDate.opened"
                  data-ng-model="userExportCtr.usersExportForm.startDate" ng-click="userExportCtr.openStartDate()"><span
                  class="input-group-btn">
                  <button class="btn btn-default" type="button" data-ng-click="userExportCtr.openStartDate()">
                    <span class="fa fa-calendar"></span>
                  </button>
                </span>
              </div>
            </div>
            <div class="col-sm-6"
              ng-class="{'has-error': !userExportCtr.htmlExportForm.endDate.$valid || !userExportCtr.htmlExportForm.startDateAfterEndDateErrorField.$valid}">
              <label class="" for="endDate">Bis</label>
              <div class="input-group">
                <input class="form-control datepicker" id="endDate" type="text" uib-datepicker-popup="dd.MM.yyyy"
                  name="endDate" is-open="userExportCtr.openEndDate.opened"
                  data-ng-model="userExportCtr.usersExportForm.endDate" ng-click="userExportCtr.openEndDate()"><span
                  class="input-group-btn">
                  <button class="btn btn-default" type="button" data-ng-click="userExportCtr.openEndDate()">
                    <span class="fa fa-calendar"></span>
                  </button>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-12">
      </div>
      <div class="col-sm-12 col-md-3">
        <div class="form-group">
          <label for="status">Status</label>
          <ui-select id="status" data-ng-model="userExportCtr.statusTemp" theme="select2">
            <ui-select-match id="status" allow-clear="false"> <span>
                {{$select.selected.label}}</span> </ui-select-match>
            <ui-select-choices repeat="status in (userExportCtr.status | filter: $select.search)">
              <span ng-bind="status.label"></span> </ui-select-choices>
          </ui-select>
        </div>
      </div>

      <div class="col-sm-12 col-md-12 btn-bar ">
        <button type="submit" class="btn btn-primary">Export</button>
        <button type="button" class="btn btn-default" data-ng-click="userExportCtr.resetValues()">Zurücksetzen</button>
      </div>
    </form>

  </div>
</div>
